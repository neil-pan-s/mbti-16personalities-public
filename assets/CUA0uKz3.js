import{Z as q,j as C,ac as r,$ as c,p as f,q as z,D as o,a1 as t,a0 as d,a3 as B,W as $,a2 as x,E as A,ad as E,a8 as S,a9 as T}from"./app-BRgou2w2.js";import{E as V}from"./CsxMJ05a.js";import{m as g,M as I}from"./CzDY2KB_.js";import"./CSusWsA2.js";const D="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2022.1.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20300%20300'%20style='enable-background:new%200%200%20300%20300;'%20xml:space='preserve'%3e%3cg%20id='icon_x5F_layer'%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2372CBCC;'%20points='151.448,231.791%20140.389,213.652%20129.031,203.472%20115.187,222.405%2097.86,253.999%20128.972,246.823%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%233AA0BA;'%20points='177.878,162.389%20190.555,199.925%20149.69,237.423%20163.412,173.331%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%235EC0D9;'%20points='97.617,66.915%20168.587,53.397%20151.83,156.069%2076.855,155.269%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23165E60;'%20points='96.527,91.929%20147.103,84.537%20120.067,98.539%20114.39,123.605%20103.512,124.344%20109.257,98.942%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23318FA6;'%20points='168.587,53.397%20216.146,98.056%20172.209,171.926%20154.113,162.654%20148.309,150.441%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23165E60;'%20points='76.855,155.269%20148.309,150.441%20172.209,171.926%20149.921,186.344%20123.93,197.029%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%231C7678;'%20points='123.93,197.029%20151.448,231.791%20172.209,171.926%20154.513,181.126%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2372CBCC;'%20points='190.555,199.925%20222.902,205.236%20214.094,225.019%20196.353,248.207%20174.332,243.522%20151.448,231.791%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2351A9AB;'%20points='129.031,203.472%2087.72,218.274%2097.86,253.999%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2351A9AB;'%20points='222.902,205.236%20235.937,260.276%20211.813,256.303%20196.353,248.207%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2327788C;'%20points='235.937,260.276%20220.49,291.174%20188.623,299.383%20190.173,263.974%20196.353,248.207%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23318FA6;'%20points='188.623,299.383%20105.583,284.899%2097.86,253.999%20151.448,231.791%20196.353,248.207%20'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2327788C;'%20d='M144.207,40.119c-44.264,0-80.144-8.969-80.144-20.035%20l9.1-3.167l8.281,3.167c0,5.732,28.1,10.382,62.764,10.382l3.52,4.148L144.207,40.119z'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2351A9AB;'%20d='M224.355,20.084c0,11.066-35.886,20.035-80.148,20.035v-9.653%20c34.66,0,62.762-4.65,62.762-10.382l7.656-1.76L224.355,20.084z'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23318FA6;'%20d='M144.207,0.049c44.261,0,80.148,8.969,80.148,20.035h-17.386%20c0-5.732-28.102-10.379-62.762-10.379l-3.17-3.948L144.207,0.049z'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2372CBCC;'%20d='M64.063,20.084c0-11.065,35.88-20.035,80.144-20.035v5.357%20v4.299c-34.664,0-62.764,4.647-62.764,10.379H64.063z'/%3e%3c/g%3e%3cg%20id='guidelines'%3e%3c/g%3e%3c/svg%3e",G="/assets/upgrade-CkrSpVnk.svg",L=C({setup(){},data(){return{price:"9.90",step:"quiz",loading:!1,limit:6,page:1,backdoor:{isTrial:!1,timestamp:new Date().getTime(),count:0},questions:r.getAll(),gender:r.getGender()||""}},methods:{async analysis(e,s=!1){let l="https://1256154226-514v92onv7-hk.scf.tencentcs.com/analysis";s&&(l="https://s.one-quant.com/mbti/analysis"),this.$route.query.host!==void 0&&(l=this.$route.query.host||"/host/analysis");const n=await(await fetch(l,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(n&&n.code)throw n.message?n.code:n;return n},handlerBackdoor(){const s=new Date().getTime();s-this.backdoor.timestamp<1e3?(this.backdoor.count++,this.backdoor.count>=3&&(g({message:"🎉 恭喜获得一次免费体验彩蛋"}),this.backdoor.isTrial=!0,this.backdoor.timestamp=s,this.backdoor.isTrial&&r.setOrder({total_fee:(this.price*100).toFixed()}))):this.backdoor.timestamp=s},setGender(){r.setGender(this.gender)},async submit(){try{this.loading=!0;let e;try{if(e=await this.analysis(this.questions),!(e&&e.type))throw"Unexpected Request Exception"}catch{if(e=await this.analysis(this.questions,!0),!(e&&e.type))throw"Unexpected Request Exception"}r.setTraits(e),this.backdoor.isTrial&&r.setOrder({total_fee:(this.price*100).toFixed()}),this.$router.push("/result")}catch(e){this.loading=!1,JSON.stringify(e)==="{}"&&(e="网络异常 请稍候重试"),I.error({message:"Error - "+JSON.stringify(e).toUpperCase()}),window.__WALLE_GUARD.sendSecurityReport("mbti|analysis",JSON.stringify(e).toUpperCase()),console.warn(e)}},reset(){r.reset(),this.$refs.quizs.reset()},check(){let e=!0;const s=this.$refs.quizs.curGroupQestions();for(let l of s)if(l.answer===""||l.answer===null){e=!1,this.$refs.quizs.scrollIntoQuestion(l);break}return e||g({message:"请回答完成此组问题！"}),e},next(){if(this.$route.query.submit!==void 0)return this.submit();if(this.check()){if(this.page===this.$refs.quizs.maxPage()){this.submit();return}this.page===this.$refs.quizs.maxPage()-1&&(this.step="submit"),this.$refs.quizs.$el.scrollIntoView({behavior:"smooth"}),this.$refs.quizs.nextPage()}}}}),i=e=>(S("data-v-93fb3f20"),e=e(),T(),e),M={class:"test"},N={class:"content"},O=i(()=>t("h3",null,"MBTI 性格测试",-1)),U=i(()=>t("h6",null,"做你自己，诚实回答，找出你的性格类型。",-1)),F=i(()=>t("span",{class:"next-page"}," 重置回答 ",-1)),R={class:"next-page"},P=i(()=>t("img",{src:G,width:"250"},null,-1)),j=i(()=>t("br",null,null,-1)),J=i(()=>t("br",null,null,-1)),Q={style:{display:"flex","justify-content":"center",color:"#88619a"}},W=i(()=>t("span",{style:{"font-size":"18px","font-weight":"bold"}},"正在分析中 请稍候 ...",-1)),H=i(()=>t("br",null,null,-1));function Z(e,s,l,m,n,K){const h=c("ui-header"),y=c("ui-container"),v=c("ui-quizs"),_=c("Delete"),u=A,p=E,b=c("ArrowRightBold"),w=c("Loading"),k=V;return f(),z("main",null,[o(h),t("div",M,[o(y,{class:"container",background:"#33a474"},{content:d(()=>[t("div",N,[t("img",{src:D,width:"100",onClick:s[0]||(s[0]=(...a)=>e.handlerBackdoor&&e.handlerBackdoor(...a))}),O,U])]),_:1}),o(v,{disabled:e.loading,ref:"quizs",class:"quizs",questions:e.questions,limit:e.limit,page:e.page,"onUpdate:page":s[1]||(s[1]=a=>e.page=a)},null,8,["disabled","questions","limit","page"]),e.page===1?(f(),B(p,{key:0,color:"#88619a",class:"button mbti-reset mbti-submit",round:"",loading:e.loading,onClick:s[2]||(s[2]=a=>e.reset()),size:"large"},{default:d(()=>[F,o(u,null,{default:d(()=>[o(_)]),_:1})]),_:1},8,["loading"])):$("",!0),o(p,{color:"#88619a",class:"button mbti-submit",round:"",loading:e.loading,onClick:s[3]||(s[3]=a=>e.next()),size:"large"},{default:d(()=>[t("span",R,x(e.step==="submit"?"查看结果":"下一组"),1),o(u,null,{default:d(()=>[o(b)]),_:1})]),_:1},8,["loading"]),o(k,{class:"mbti-submit-dialog","modal-class":"mbti-submit-modal",modelValue:e.loading,"onUpdate:modelValue":s[4]||(s[4]=a=>e.loading=a),"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500"},{default:d(()=>[P,j,J,t("h3",Q,[o(u,{class:"is-loading",size:"30",style:{"margin-right":"10px"}},{default:d(()=>[o(w)]),_:1}),W]),H]),_:1},8,["modelValue"])])])}const te=q(L,[["render",Z],["__scopeId","data-v-93fb3f20"]]);export{te as default};
