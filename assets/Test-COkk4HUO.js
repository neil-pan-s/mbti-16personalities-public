import{_ as z,d as C,r as n,o as q,c as x,a as o,b as s,w as a,s as r,f as A,h as B,t as k,e as $,E as I,p as S,g as V}from"./index-CkNFpI0r.js";import{m as T}from"./message-CRTmf2CA.js";const u=location.hostname==="localhost"?"/mbti":"https://www.16personalities.com";async function E(e,l="Male"){const t=u+"/ch/结果";return(await(await fetch(t,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({extraData:[],gender:l,questions:e,teamInviteKey:"",inviteCode:""})})).json()).redirect.split("/").pop().slice(0,4)}async function G(){const e=u+"/api/profile/traits";return await(await fetch(e,{method:"POST",mode:"cors"})).json()}const p={postQuizs:E,postTrait:G},M="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2022.1.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20300%20300'%20style='enable-background:new%200%200%20300%20300;'%20xml:space='preserve'%3e%3cg%20id='icon_x5F_layer'%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2372CBCC;'%20points='151.448,231.791%20140.389,213.652%20129.031,203.472%20115.187,222.405%2097.86,253.999%20128.972,246.823%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%233AA0BA;'%20points='177.878,162.389%20190.555,199.925%20149.69,237.423%20163.412,173.331%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%235EC0D9;'%20points='97.617,66.915%20168.587,53.397%20151.83,156.069%2076.855,155.269%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23165E60;'%20points='96.527,91.929%20147.103,84.537%20120.067,98.539%20114.39,123.605%20103.512,124.344%20109.257,98.942%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23318FA6;'%20points='168.587,53.397%20216.146,98.056%20172.209,171.926%20154.113,162.654%20148.309,150.441%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23165E60;'%20points='76.855,155.269%20148.309,150.441%20172.209,171.926%20149.921,186.344%20123.93,197.029%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%231C7678;'%20points='123.93,197.029%20151.448,231.791%20172.209,171.926%20154.513,181.126%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2372CBCC;'%20points='190.555,199.925%20222.902,205.236%20214.094,225.019%20196.353,248.207%20174.332,243.522%20151.448,231.791%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2351A9AB;'%20points='129.031,203.472%2087.72,218.274%2097.86,253.999%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2351A9AB;'%20points='222.902,205.236%20235.937,260.276%20211.813,256.303%20196.353,248.207%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2327788C;'%20points='235.937,260.276%20220.49,291.174%20188.623,299.383%20190.173,263.974%20196.353,248.207%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23318FA6;'%20points='188.623,299.383%20105.583,284.899%2097.86,253.999%20151.448,231.791%20196.353,248.207%20'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2327788C;'%20d='M144.207,40.119c-44.264,0-80.144-8.969-80.144-20.035%20l9.1-3.167l8.281,3.167c0,5.732,28.1,10.382,62.764,10.382l3.52,4.148L144.207,40.119z'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2351A9AB;'%20d='M224.355,20.084c0,11.066-35.886,20.035-80.148,20.035v-9.653%20c34.66,0,62.762-4.65,62.762-10.382l7.656-1.76L224.355,20.084z'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23318FA6;'%20d='M144.207,0.049c44.261,0,80.148,8.969,80.148,20.035h-17.386%20c0-5.732-28.102-10.379-62.762-10.379l-3.17-3.948L144.207,0.049z'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2372CBCC;'%20d='M64.063,20.084c0-11.065,35.88-20.035,80.144-20.035v5.357%20v4.299c-34.664,0-62.764,4.647-62.764,10.379H64.063z'/%3e%3c/g%3e%3cg%20id='guidelines'%3e%3c/g%3e%3c/svg%3e",P="/assets/upgrade-CkrSpVnk.svg",L=C({setup(){},data(){return{step:"quiz",loading:!1,limit:5,page:1,questions:r.getAll(),gender:r.getGender()||""}},methods:{setGender(){r.setGender(this.gender)},async submit(){try{this.loading=!0;const e=await p.postQuizs(this.questions,this.gender),l=await p.postTrait();l.type=e,r.setTraits(l),this.$router.push("/traits")}catch(e){this.loading=!1,console.warn(e)}},check(){let e=!0;const l=this.$refs.quizs.curGroupQestions();for(let t of l)if(t.answer===""||t.answer===null){e=!1,this.$refs.quizs.scrollIntoQuestion(t);break}return e||T({message:"请回答完成此组问题！"}),e},next(){if(this.check()){if(this.page===this.$refs.quizs.maxPage()){this.submit();return}this.page===this.$refs.quizs.maxPage()-1&&(this.step="submit"),this.$refs.quizs.$el.scrollIntoView({behavior:"smooth"}),this.$refs.quizs.nextPage()}}}}),i=e=>(S("data-v-b1f39db6"),e=e(),V(),e),j={class:"test"},D=i(()=>s("div",{class:"content"},[s("img",{src:M,width:"100"}),s("h3",null,"MBTI 性格测试"),s("h6",null,"做你自己，诚实回答，找出你的性格类型。")],-1)),F={class:"next-page"},N=i(()=>s("img",{src:P,width:"250"},null,-1)),O=i(()=>s("br",null,null,-1)),Q=i(()=>s("br",null,null,-1)),H={style:{display:"flex","justify-content":"center",color:"#88619a"}},R=i(()=>s("span",{style:{"font-size":"18px","font-weight":"bold"}},"正在分析中 请稍候 ...",-1)),U=i(()=>s("br",null,null,-1));function J(e,l,t,f,g,K){const m=n("ui-header"),h=n("ui-container"),v=n("ui-quizs"),_=n("ArrowRightBold"),c=I,y=A,w=n("Loading"),b=B;return q(),x("main",null,[o(m),s("div",j,[o(h,{class:"container",background:"#33a474"},{content:a(()=>[D]),_:1}),o(v,{disabled:e.loading,ref:"quizs",class:"quizs",questions:e.questions,limit:e.limit,page:e.page,"onUpdate:page":l[0]||(l[0]=d=>e.page=d)},null,8,["disabled","questions","limit","page"]),o(y,{color:"#88619a",class:"button mbti-submit",round:"",loading:e.loading,onClick:l[1]||(l[1]=d=>e.next()),size:"large"},{default:a(()=>[s("span",F,k(e.step==="submit"?"查看结果":"下一组"),1),$(),o(c,null,{default:a(()=>[o(_)]),_:1})]),_:1},8,["loading"]),o(b,{class:"mbti-submit-dialog","modal-class":"mbti-submit-modal",modelValue:e.loading,"onUpdate:modelValue":l[2]||(l[2]=d=>e.loading=d),"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500"},{default:a(()=>[N,O,Q,s("h3",H,[o(c,{class:"is-loading",size:"30",style:{"margin-right":"10px"}},{default:a(()=>[o(w)]),_:1}),R]),U]),_:1},8,["modelValue"])])])}const Y=z(L,[["render",J],["__scopeId","data-v-b1f39db6"]]);export{Y as default};
