import{Z as k,j as C,aa as a,$ as d,p as f,q,D as t,a1 as o,a0 as r,a3 as z,W as B,a2 as $,E as A,ab as x,a7 as E,a8 as S}from"./app-CleCoinX.js";import{E as T}from"./rI3WG_zK.js";import{m as g,M as V}from"./brBTUYa0.js";import"./OdSNoe4T.js";const I="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2022.1.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20300%20300'%20style='enable-background:new%200%200%20300%20300;'%20xml:space='preserve'%3e%3cg%20id='icon_x5F_layer'%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2372CBCC;'%20points='151.448,231.791%20140.389,213.652%20129.031,203.472%20115.187,222.405%2097.86,253.999%20128.972,246.823%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%233AA0BA;'%20points='177.878,162.389%20190.555,199.925%20149.69,237.423%20163.412,173.331%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%235EC0D9;'%20points='97.617,66.915%20168.587,53.397%20151.83,156.069%2076.855,155.269%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23165E60;'%20points='96.527,91.929%20147.103,84.537%20120.067,98.539%20114.39,123.605%20103.512,124.344%20109.257,98.942%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23318FA6;'%20points='168.587,53.397%20216.146,98.056%20172.209,171.926%20154.113,162.654%20148.309,150.441%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23165E60;'%20points='76.855,155.269%20148.309,150.441%20172.209,171.926%20149.921,186.344%20123.93,197.029%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%231C7678;'%20points='123.93,197.029%20151.448,231.791%20172.209,171.926%20154.513,181.126%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2372CBCC;'%20points='190.555,199.925%20222.902,205.236%20214.094,225.019%20196.353,248.207%20174.332,243.522%20151.448,231.791%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2351A9AB;'%20points='129.031,203.472%2087.72,218.274%2097.86,253.999%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2351A9AB;'%20points='222.902,205.236%20235.937,260.276%20211.813,256.303%20196.353,248.207%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2327788C;'%20points='235.937,260.276%20220.49,291.174%20188.623,299.383%20190.173,263.974%20196.353,248.207%20'/%3e%3cpolygon%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23318FA6;'%20points='188.623,299.383%20105.583,284.899%2097.86,253.999%20151.448,231.791%20196.353,248.207%20'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2327788C;'%20d='M144.207,40.119c-44.264,0-80.144-8.969-80.144-20.035%20l9.1-3.167l8.281,3.167c0,5.732,28.1,10.382,62.764,10.382l3.52,4.148L144.207,40.119z'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2351A9AB;'%20d='M224.355,20.084c0,11.066-35.886,20.035-80.148,20.035v-9.653%20c34.66,0,62.762-4.65,62.762-10.382l7.656-1.76L224.355,20.084z'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%23318FA6;'%20d='M144.207,0.049c44.261,0,80.148,8.969,80.148,20.035h-17.386%20c0-5.732-28.102-10.379-62.762-10.379l-3.17-3.948L144.207,0.049z'/%3e%3cpath%20style='fill-rule:evenodd;clip-rule:evenodd;fill:%2372CBCC;'%20d='M64.063,20.084c0-11.065,35.88-20.035,80.144-20.035v5.357%20v4.299c-34.664,0-62.764,4.647-62.764,10.379H64.063z'/%3e%3c/g%3e%3cg%20id='guidelines'%3e%3c/g%3e%3c/svg%3e",D="/assets/upgrade-CkrSpVnk.svg",G=C({setup(){},data(){return{price:"9.90",step:"quiz",loading:!1,limit:6,page:1,backdoor:{isTrial:!1,timestamp:new Date().getTime(),count:0},questions:a.getAll(),gender:a.getGender()||""}},methods:{async analysis(e){let s=location.hostname==="localhost"?"/host/analysis":"https://1256154226-514v92onv7-hk.scf.tencentcs.com/analysis";this.$route.query.host!==void 0&&(s=this.$route.query.host||"/host/analysis");const i=await(await fetch(s,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(i&&i.code)throw i.message?i.code:i;return i},handlerBackdoor(){const s=new Date().getTime();s-this.backdoor.timestamp<1e3?(this.backdoor.count++,this.backdoor.count>=3&&(g({message:"🎉 恭喜获得一次免费体验彩蛋"}),this.backdoor.isTrial=!0,this.backdoor.timestamp=s,this.backdoor.isTrial&&a.setOrder({total_fee:(this.price*100).toFixed()}))):this.backdoor.timestamp=s},setGender(){a.setGender(this.gender)},async submit(){try{this.loading=!0;const e=await this.analysis(this.questions);if(!(e&&e.type))throw"Unexpected Request Exception";a.setTraits(e),this.backdoor.isTrial&&a.setOrder({total_fee:(this.price*100).toFixed()}),this.$router.push("/result")}catch(e){this.loading=!1,JSON.stringify(e)==="{}"&&(e="网络异常 请重试"),V.error({message:"Error - "+JSON.stringify(e).toUpperCase()}),window.__WALLE_GUARD.sendSecurityReport("mbti|analysis",JSON.stringify(e).toUpperCase()),console.warn(e)}},reset(){a.reset(),this.$refs.quizs.reset()},check(){let e=!0;const s=this.$refs.quizs.curGroupQestions();for(let c of s)if(c.answer===""||c.answer===null){e=!1,this.$refs.quizs.scrollIntoQuestion(c);break}return e||g({message:"请回答完成此组问题！"}),e},next(){if(this.$route.query.submit!==void 0)return this.submit();if(this.check()){if(this.page===this.$refs.quizs.maxPage()){this.submit();return}this.page===this.$refs.quizs.maxPage()-1&&(this.step="submit"),this.$refs.quizs.$el.scrollIntoView({behavior:"smooth"}),this.$refs.quizs.nextPage()}}}}),l=e=>(E("data-v-9a10b3ff"),e=e(),S(),e),L={class:"test"},M={class:"content"},N=l(()=>o("h3",null,"MBTI 性格测试",-1)),O=l(()=>o("h6",null,"做你自己，诚实回答，找出你的性格类型。",-1)),F=l(()=>o("span",{class:"next-page"}," 重置回答 ",-1)),U={class:"next-page"},P=l(()=>o("img",{src:D,width:"250"},null,-1)),R=l(()=>o("br",null,null,-1)),j=l(()=>o("br",null,null,-1)),J={style:{display:"flex","justify-content":"center",color:"#88619a"}},Q=l(()=>o("span",{style:{"font-size":"18px","font-weight":"bold"}},"正在分析中 请稍候 ...",-1)),W=l(()=>o("br",null,null,-1));function H(e,s,c,i,Z,K){const m=d("ui-header"),h=d("ui-container"),y=d("ui-quizs"),v=d("Delete"),u=A,p=x,_=d("ArrowRightBold"),b=d("Loading"),w=T;return f(),q("main",null,[t(m),o("div",L,[t(h,{class:"container",background:"#33a474"},{content:r(()=>[o("div",M,[o("img",{src:I,width:"100",onClick:s[0]||(s[0]=(...n)=>e.handlerBackdoor&&e.handlerBackdoor(...n))}),N,O])]),_:1}),t(y,{disabled:e.loading,ref:"quizs",class:"quizs",questions:e.questions,limit:e.limit,page:e.page,"onUpdate:page":s[1]||(s[1]=n=>e.page=n)},null,8,["disabled","questions","limit","page"]),e.page===1?(f(),z(p,{key:0,color:"#88619a",class:"button mbti-reset mbti-submit",round:"",loading:e.loading,onClick:s[2]||(s[2]=n=>e.reset()),size:"large"},{default:r(()=>[F,t(u,null,{default:r(()=>[t(v)]),_:1})]),_:1},8,["loading"])):B("",!0),t(p,{color:"#88619a",class:"button mbti-submit",round:"",loading:e.loading,onClick:s[3]||(s[3]=n=>e.next()),size:"large"},{default:r(()=>[o("span",U,$(e.step==="submit"?"查看结果":"下一组"),1),t(u,null,{default:r(()=>[t(_)]),_:1})]),_:1},8,["loading"]),t(w,{class:"mbti-submit-dialog","modal-class":"mbti-submit-modal",modelValue:e.loading,"onUpdate:modelValue":s[4]||(s[4]=n=>e.loading=n),"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500"},{default:r(()=>[P,R,j,o("h3",J,[t(u,{class:"is-loading",size:"30",style:{"margin-right":"10px"}},{default:r(()=>[t(b)]),_:1}),Q]),W]),_:1},8,["modelValue"])])])}const oe=k(G,[["render",H],["__scopeId","data-v-9a10b3ff"]]);export{oe as default};
